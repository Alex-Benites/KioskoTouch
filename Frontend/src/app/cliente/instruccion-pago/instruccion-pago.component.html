<div class="instruccion-pago-container" [class]="tipoPago">

  <!-- Banner Promocional Superior -->
  <app-publicidad-section 
    seccion="pago"
    altura="200px"
    (publicidadCambio)="onPublicidadCambio($event)">
  </app-publicidad-section>

  <!-- Contenido Principal -->
  <main class="pago-content">
    <img src="assets/cliente/kiosko_go4k.png" alt="Kiosko Go!" class="kiosko-logo">

    <div class="pago-icon-wrapper">
      <img [src]="obtenerImagenTipo()" [alt]="obtenerTitulo()" class="pago-icon">
    </div>

    <h2 class="pago-title">{{ obtenerTitulo() }}</h2>

    <!-- ✅ UN SOLO CONTENEDOR DE BOTONES SIN DUPLICADOS -->
    <div class="botones-unico" style="margin-top: 50px;">
      
      <!-- BOTÓN PARA COMPLETADO -->
      <div *ngIf="tipoPago === 'completado'" >
        <button 
          style="
            background: #28a745; 
            color: white; 
            padding: -1px 40px; 
            border: none; 
            border-radius: 20px; 
            font-size: 30px; 
            cursor: pointer;
            width: 300px;
            height: 60px;
            margin: 20px auto;
            display: block;
            font-weight: bold;
          "
          (click)="finalizarPedido()">
            Finalizar Pedido
        </button>
      </div>

      <!-- BOTÓN PARA OTROS CASOS -->
      <div *ngIf="tipoPago !== 'completado'">
        <button 
          class="pago-button" 
          [disabled]="procesandoPago"
          (click)="continuar()">
          {{ obtenerTextoBoton() }}
        </button>
      </div>

      <!-- BOTÓN CANCELAR -->
      <div *ngIf="tipoPago === 'tarjeta' && estadoPago.estado !== 'exitoso'">
        <button 
          class="btn-cancelar" 
          [disabled]="procesandoPago"
          (click)="cancelarPago()">
          Cancelar
        </button>
      </div>
    </div>

    <!-- FACTURA OCULTA -->
    <app-factura-pago 
      *ngIf="mostrarFactura && datosFactura"
      [datosFactura]="datosFactura"
      style="position: absolute; left: -9999px; top: -9999px;">
    </app-factura-pago>
  </main>
</div>