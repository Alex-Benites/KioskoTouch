<div class="menu-page-container">
  <!-- Banner Promocional Superior -->
  <div class="promo-banner-top">
    <img src="img/cliente/promo-banner-superior.png" alt="Nuestra Nueva Hamburguesa">
  </div>

  <header class="menu-header">
    <h1 class="menu-header__title">KIOSCO GO!</h1>
  </header>

  <!-- Sección de Idiomas Comentada -->
  <!--
  <section class="home__languages-container">
    <p class="home__title">Menú</p>
    <article class="home__languages">
      <label>
        <span class="flag english__language"></span>
        Inglés
        <input
          class="language__selector"
          type="radio"
          name="idioma"
          value="en"
          [checked]="idiomaActual === 'en'"
          (change)="cambiarIdioma($event)">
      </label>
      <label>
        <span class="flag spanish__language"></span>
        Español
        <input
          class="language__selector"
          type="radio"
          name="idioma"
          value="es"
          [checked]="idiomaActual === 'es'"
          (change)="cambiarIdioma($event)">
      </label>
    </article>
  </section>
  -->

  <div class="menu-content-layout">
    <!-- Barra Lateral de Categorías -->
    <aside class="category-sidebar">
      @for (categoria of categoriasLista; track categoria.id) {
        <div
          class="category-item"
          [class.active]="categoria.id === categoriaActual?.id"
          (click)="seleccionarCategoria(categoria)">
          <img [src]="obtenerImagenCategoria(categoria)" [alt]="categoria.nombre" class="category-item__icon">
        </div>
      }
    </aside>

    <!-- Contenido Principal: Título del Menú y Productos -->
    <main class="main-menu-content">
      <div class="menu-title-section">
        <span class="menu-title-label">MENÚ</span>
        <h2 class="menu-category-name">{{ categoriaActual?.nombre || 'Seleccione Categoría' }}</h2>
      </div>

      <section class="products-grid">
        @if (productosActuales.length > 0) {
          @for (producto of productosActuales; track producto.id) {
            <div class="product-card">
              @if (producto.promoBadge) {
                <span class="promo-badge" [ngClass]="producto.promoBadgeClass || ''">{{ producto.promoBadge }}</span>
              }
              <img [src]="obtenerImagenProducto(producto)" [alt]="producto.nombre" class="product-card__image">
              <h3 class="product-card__name">{{ producto.nombre }}</h3>
              <div class="product-card__footer">
                <span class="product-card__price">${{ producto.precio.toFixed(2) }}</span>
                <button class="product-card__order-button" (click)="agregarProducto(producto)">
                  Ordenar
                </button>
              </div>
            </div>
          }
        } @else {
          <p class="no-products-message">No hay productos disponibles en esta categoría.</p>
        }
      </section>
    </main>
  </div>

  <!-- Footer: Resumen del Pedido -->
  <footer class="order-summary-footer">
    <h2 class="order-summary__title">Mi Orden</h2>
    @if (cantidadItemsSeguro > 0) {
      <div class="order-summary__details">
        <span>Total: ${{ totalPedidoSeguro.toFixed(2) }}</span>
        <span>Productos: {{ cantidadItemsSeguro }}</span>
      </div>
    } @else {
      <p class="order-summary__empty-message">Tu pedido está vacío</p>
    }
    <div class="order-summary__actions">
      <button class="order-summary__button order-summary__cancel-button" (click)="limpiarPedido()">
        Cancelar pedido
      </button>
      <button
        class="order-summary__button order-summary__continue-button"
        (click)="continuar()"
        [disabled]="!puedeontinuar">
        Continuar
      </button>
    </div>
  </footer>

  @if (mostrarLogin) {
    <div class="popup-overlay">
      <div class="popup">
        <button (click)="cerrarPopupLogin()" class="popup-close">×</button>
        <h2>Escanee el siguiente código QR</h2>
        <img src="img/cliente/codigoQR.png" alt="Código QR" />
      </div>
    </div>
  }
</div>