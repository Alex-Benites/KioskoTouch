<app-header-admin></app-header-admin>

<div class="container">
  <div class="header-section">
    <div class="breadcrumb-section">
      <p class="breadcrumb">GESTIÓN DE PRODUCTOS</p>
      <h1 class="page-title">Gestión de Ingredientes</h1>
      <p class="subtitle">Total de ingredientes: {{ totalIngredientes }}</p>
    </div>
    
    <div class="header-actions">
      <button mat-raised-button color="primary" (click)="crearIngrediente()" class="create-btn">
        <mat-icon>add</mat-icon>
        Nuevo Ingrediente
      </button>
    </div>
  </div>

  <div class="tabs-container">
    <mat-tab-group class="ingredients-tabs">
      
      <!-- TAB HAMBURGUESAS -->
      <mat-tab label="🍔 Hamburguesas">
        <div class="tab-content">
          <div *ngIf="cargandoHamburguesas" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes de hamburguesas...</p>
          </div>
          
          <div *ngIf="!cargandoHamburguesas && ingredientesHamburguesas.length === 0" class="empty-state">
            <mat-icon class="empty-icon">restaurant_menu</mat-icon>
            <h3>No hay ingredientes de hamburguesas</h3>
            <p>Crea el primer ingrediente para hamburguesas</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoHamburguesas && ingredientesHamburguesas.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesHamburguesas" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>

      <!-- TAB PIZZAS -->
      <mat-tab label="🍕 Pizzas">
        <div class="tab-content">
          <div *ngIf="cargandoPizzas" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes de pizzas...</p>
          </div>
          
          <div *ngIf="!cargandoPizzas && ingredientesPizzas.length === 0" class="empty-state">
            <mat-icon class="empty-icon">local_pizza</mat-icon>
            <h3>No hay ingredientes de pizzas</h3>
            <p>Crea el primer ingrediente para pizzas</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoPizzas && ingredientesPizzas.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesPizzas" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>

      <!-- TAB ENSALADAS -->
      <mat-tab label="🥗 Ensaladas">
        <div class="tab-content">
          <div *ngIf="cargandoEnsaladas" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes de ensaladas...</p>
          </div>
          
          <div *ngIf="!cargandoEnsaladas && ingredientesEnsaladas.length === 0" class="empty-state">
            <mat-icon class="empty-icon">eco</mat-icon>
            <h3>No hay ingredientes de ensaladas</h3>
            <p>Crea el primer ingrediente para ensaladas</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoEnsaladas && ingredientesEnsaladas.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesEnsaladas" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>

      <!-- TABS ADICIONALES -->
      <mat-tab label="🍗 Pollos">
        <div class="tab-content">
          <div *ngIf="cargandoPollos" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes de pollos...</p>
          </div>
          
          <div *ngIf="!cargandoPollos && ingredientesPollos.length === 0" class="empty-state">
            <mat-icon class="empty-icon">restaurant</mat-icon>
            <h3>No hay ingredientes de pollos</h3>
            <p>Crea el primer ingrediente para pollos</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoPollos && ingredientesPollos.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesPollos" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>

      <mat-tab label="🍦 Helados">
        <div class="tab-content">
          <div *ngIf="cargandoHelados" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes de helados...</p>
          </div>
          
          <div *ngIf="!cargandoHelados && ingredientesHelados.length === 0" class="empty-state">
            <mat-icon class="empty-icon">icecream</mat-icon>
            <h3>No hay ingredientes de helados</h3>
            <p>Crea el primer ingrediente para helados</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoHelados && ingredientesHelados.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesHelados" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>

      <!-- TAB SNACKS (agregar nuevo) -->
      <mat-tab label="🍿 Snacks">
        <div class="tab-content">
          <div *ngIf="cargandoSnacks" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes de snacks...</p>
          </div>
          
          <div *ngIf="!cargandoSnacks && ingredientesSnacks.length === 0" class="empty-state">
            <mat-icon class="empty-icon">fastfood</mat-icon>
            <h3>No hay ingredientes de snacks</h3>
            <p>Crea el primer ingrediente para snacks</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoSnacks && ingredientesSnacks.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesSnacks" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>

      <!-- AGREGAR estos tabs que faltan DESPUÉS del tab de Snacks -->

      <!-- TAB BEBIDAS -->
      <mat-tab label="🥤 Bebidas">
        <div class="tab-content">
          <div *ngIf="cargandoBebidas" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes de bebidas...</p>
          </div>
          
          <div *ngIf="!cargandoBebidas && ingredientesBebidas.length === 0" class="empty-state">
            <mat-icon class="empty-icon">local_drink</mat-icon>
            <h3>No hay ingredientes de bebidas</h3>
            <p>Crea el primer ingrediente para bebidas</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoBebidas && ingredientesBebidas.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesBebidas" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>

      <!-- TAB INFANTIL -->
      <mat-tab label="👶 Infantil">
        <div class="tab-content">
          <div *ngIf="cargandoInfantil" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes infantiles...</p>
          </div>
          
          <div *ngIf="!cargandoInfantil && ingredientesInfantil.length === 0" class="empty-state">
            <mat-icon class="empty-icon">child_care</mat-icon>
            <h3>No hay ingredientes infantiles</h3>
            <p>Crea el primer ingrediente para el menú infantil</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoInfantil && ingredientesInfantil.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesInfantil" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>

      <!-- TAB COMBOS -->
      <mat-tab label="🍽️ Combos">
        <div class="tab-content">
          <div *ngIf="cargandoCombos" class="loading-container">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Cargando ingredientes de combos...</p>
          </div>
          
          <div *ngIf="!cargandoCombos && ingredientesCombos.length === 0" class="empty-state">
            <mat-icon class="empty-icon">restaurant</mat-icon>
            <h3>No hay ingredientes de combos</h3>
            <p>Crea el primer ingrediente para combos</p>
            <button mat-raised-button color="primary" (click)="crearIngrediente()">
              <mat-icon>add</mat-icon>
              Crear Ingrediente
            </button>
          </div>
          
          <div class="ingredients-grid" *ngIf="!cargandoCombos && ingredientesCombos.length > 0">
            <mat-card *ngFor="let ingrediente of ingredientesCombos" class="ingredient-card">
              <div class="card-image">
                <img 
                  [src]="getFullImageUrl(ingrediente.imagen_url)"
                  [alt]="ingrediente.nombre"
                  class="ingredient-image"
                  (error)="onImageError($event)">
                <div class="price-badge">
                  +${{ ingrediente.precio_adicional }}
                </div>
              </div>
              
              <mat-card-header>
                <mat-card-title>{{ ingrediente.nombre }}</mat-card-title>
                <mat-card-subtitle>{{ ingrediente.descripcion }}</mat-card-subtitle>
              </mat-card-header>
              
              <mat-card-content>
                <div class="ingredient-info">
                  <small class="creation-date">
                    <mat-icon>schedule</mat-icon>
                    {{ formatDate(ingrediente.created_at) }}
                  </small>
                </div>
              </mat-card-content>
              
              <mat-card-actions class="card-actions">
                <button mat-button color="primary" (click)="editarIngrediente(ingrediente.id)">
                  <mat-icon>edit</mat-icon>
                  Editar
                </button>
                <button mat-button color="warn" (click)="eliminarIngrediente(ingrediente)">
                  <mat-icon>delete</mat-icon>
                  Eliminar
                </button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

<app-footer-admin [backRoute]="'/administrador/gestion-productos'"></app-footer-admin>
